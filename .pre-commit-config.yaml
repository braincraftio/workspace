# .pre-commit-config.yaml v4
#
# Runs a comprehensive suite of non-mutating checks before each commit.
# All logic is delegated to the `mise` task runner for a single source of truth.
# See `.mise.toml` for task definitions.

minimum_pre_commit_version: 3.5.0
fail_fast: true

repos:
  - repo: local
    hooks:
      # This single hook runs all linters, tests, and security scans
      # via `mise run pre-commit` (alias `pc`).
      # It is a non-mutating quality gate.
      - id: mise-pre-commit-checks
        name: Run mise pre-commit checks
        entry: bash -l -c 'mise run pre-commit:smart'
        language: system
        pass_filenames: false
        always_run: false
        verbose: true
        # Run when any source file is modified
        files: '\.(py|js|jsx|ts|tsx|sh|bash|yml|yaml|toml|json)$'

# Files to always exclude
exclude: |
  (?x)^(
    .*\.min\.(js|css)|
    .*\.map|
    vendor/|
    node_modules/|
    \.git/|
    \.next/|
    \.nuxt/|
    dist/|
    build/|
    coverage/|
    \.reports/|
    \.npm-global/|
    \.pnpm-store/|
    \.cargo/|
    \.cache/|
    target/|
    tmp/
  )
